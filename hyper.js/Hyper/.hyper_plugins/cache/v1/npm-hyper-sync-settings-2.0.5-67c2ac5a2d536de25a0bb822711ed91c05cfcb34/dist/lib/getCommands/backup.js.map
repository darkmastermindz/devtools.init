{"version":3,"sources":["../../../src/lib/getCommands/backup.js"],"names":["paths","files","restoreFile","restore","backupFile","backup","repoPromise","remoteUrl","fs","copyAsync","clobber","dirs","repo","addRemote","undefined","fetch","add","commit","Date","push","then","resolve"],"mappings":";;;;;;;;;;;;;;AAAA;;;;AACA;;AACA;;;;;;mBAOIA,gB,CAJFC,K;MACWC,W,gBAATC,O;MACQC,U,gBAARC,M;;;6CAIW,WAAO,EAAEC,WAAF,EAAeC,SAAf,EAAP,EAAsC;AACnD,UAAMC,aAAGC,SAAH,CAAaP,WAAb,EAA0BE,UAA1B,EAAsC,EAAEM,SAAS,IAAX,EAAtC,CAAN;AACA,UAAMJ,WAAN;AACA,UAAM,sBACJ,mBAAW;AACT,+BAAUN,iBAAMW,IAAN,CAAWC,IAArB,EACGC,SADH,CAEI,QAFJ,EAGIN,SAHJ,EAII;AAAA,eAAMO,SAAN;AAAA,OAJJ;;AAOA,+BAAUd,iBAAMW,IAAN,CAAWC,IAArB,EACGG,KADH,GAEGC,GAFH,CAEO,WAFP,EAGGC,MAHH,CAGW,GAAE,IAAIC,IAAJ,EAAW,EAHxB,EAIGC,IAJH,CAIQ,QAJR,EAIkB,QAJlB,EAKGC,IALH,CAKQC,OALR;AAMD,KAfG,CAAN;AAiBD,G","file":"backup.js","sourcesContent":["import simpleGit from 'simple-git';\nimport { paths } from '../../constants';\nimport fs from '../fs';\n\nconst {\n  files: {\n    restore: restoreFile,\n    backup: backupFile,\n  },\n} = paths;\n\nexport default async ({ repoPromise, remoteUrl }) => {\n  await fs.copyAsync(restoreFile, backupFile, { clobber: true });\n  await repoPromise;\n  await new Promise(\n    resolve => {\n      simpleGit(paths.dirs.repo)\n        .addRemote(\n          'origin',\n          remoteUrl,\n          () => undefined,\n        );\n\n      simpleGit(paths.dirs.repo)\n        .fetch()\n        .add('.hyper.js')\n        .commit(`${new Date()}`)\n        .push('origin', 'master')\n        .then(resolve);\n    },\n  );\n};\n"]}